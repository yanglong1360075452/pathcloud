<div ng-controller="reagentStoreConsumablesController as reagent" id="storeConsumables">

  <div class="container">

    <form class="form-horizontal row clearfix" name="reagent_form" role="reagent_form" >
      <fieldset style=" margin-bottom: 50px;" >
        <div class="col-sm-4">
          <h4>{{'基本信息'|translate}}</h4>
          <!--名称-->
          <div  class="form-group has-feedback">

            <label for="name" class="col-sm-3 control-label">{{'耗材名称'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" name="name" id="name" required
                     ng-model="reagent.basic.name" ng-blur="reagent.getReagentName()"
                     onkeydown="if(event.keyCode==32) return false"
                     maxlength="20"
              >
              <span ng-show="nameOk" class="glyphicon glyphicon-ok form-control-feedback"></span>
            </div>
          </div>

          <!--类别-->
          <div  class="form-group has-feedback">

            <label for="category" class="col-sm-3 control-label">{{'耗材类别'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-8">
              <select  class="form-control" name="category" id="category" required
                       ng-model="reagent.basic.type" ng-disabled="reagent.nameCheck"
                       ng-options="item.code as item.name for item in reagent.categoryList">
                >
              </select>
            </div>
          </div>


          <!--数量-->
          <div  class="form-group has-feedback" >
            <label for="name" class="col-sm-3 control-label">{{'数量'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-4" style="padding-left:0;">
              <input  type="text" class="form-control" name="specification" ng-model="reagent.data.count"
                      onkeydown="if(event.keyCode==32) return false" required
                      maxlength="20">
            </div>
            <div class="col-sm-4">
              <select class="form-control" name="category"
                      ng-model="reagent.data.countType"
                      ng-options="item.code as item.name for item in reagent.countType">
                <option value="">{{'盒'|translate}}</option>
              </select>
            </div>
          </div>

          <!--规格-->
          <div  class="form-group has-feedback">
            <label for="name" class="col-sm-3 control-label">{{'规格'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-4" style="padding-left:0">
              <input  type="text" class="form-control" name="specification" id="specification"
                      ng-model="reagent.data.specification" style="padding-right:0" required
                      onkeydown="if(event.keyCode==32) return false"
                      maxlength="20"
              >
            </div>
            <label  class="col-sm-2 control-label" style="padding-left:0">/盒</label>
          </div>

        </div>


        <div class="col-sm-4">
          <h4>{{'厂商信息'|translate}}</h4>

          <!--订单号-->
          <div  class="form-group has-feedback">

            <label for="name" class="col-sm-3 control-label">{{'订单号'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" name="orderNumber" id="orderNumber"
                     ng-model="reagent.data.orderNumber" required
                     onkeydown="if(event.keyCode==32) return false"
                     maxlength="20"
              >
              <span ng-show="orderNumberOk" class="glyphicon glyphicon-ok form-control-feedback"></span>
            </div>
          </div>

          <!--产品编号-->
          <div  class="form-group has-feedback">

            <label for="name" class="col-sm-3 control-label">{{'产品编号'|translate}}：</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" name="serialNumber" id="serialNumber"
                     ng-model="reagent.data.productNumber"
                     onkeydown="if(event.keyCode==32) return false"
                     maxlength="20"
              >
            </div>
          </div>


          <!--制造商-->
          <div  class="form-group has-feedback">

            <label for="name" class="col-sm-3 control-label">{{'制造商'|translate}}：</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" name="manufacturer" id="manufacturer"
                     ng-model="reagent.data.manufacturer"
                     onkeydown="if(event.keyCode==32) return false"
                     maxlength="20"
              >
            </div>
          </div>


          <!--货号-->
          <div  class="form-group has-feedback">
            <label for="name" class="col-sm-3 control-label">{{'货号'|translate}}：</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" name="articleNumber" id="articleNumber"
                     ng-model="reagent.data.articleNumber"
                     onkeydown="if(event.keyCode==32) return false"
                     maxlength="20"
              >
            </div>
          </div>

          <!--生产批号-->
          <div  class="form-group has-feedback">
            <label for="name" class="col-sm-3 control-label">{{'生产批号'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" name="batchNumber" id="batchNumber" required
                     ng-model="reagent.data.batchNumber"
                     onkeydown="if(event.keyCode==32) return false"
                     maxlength="20"
              >
            </div>
          </div>

          <!--生产日期-->
          <div  class="form-group has-feedback">
            <label for="productionDate" class="col-sm-3 control-label">{{'生产日期'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-8" ng-init="productionDate = false">
              <input type="text"  clear-text="清除" close-text="确定" current-text="今天" name="productionDate" class="form-control" id="productionDate"
                     uib-datepicker-popup min="minStartDate" max="maxStartDate"  datepicker-options="dateOptions1"
                     ng-click="productionDate=!productionDate" style="background:none;"
                     ng-model="reagent.data.produceTime" readonly required
                     is-open="productionDate" />
              <span class=" form-control-feedback" ng-click="productionDate=!productionDate"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
          </div>

          <!--失效日期-->
          <div  class="form-group has-feedback"  >
            <label for="expiryDate" class="col-sm-3 control-label">{{'失效日期'|translate}}<span class="required">*</span>：</label>
            <div class="col-sm-8" ng-init="openExpiryDate = false">
              <input type="text"  clear-text="清除" close-text="确定" current-text="今天" name="expiryDate" class="form-control" id="expiryDate"
                     uib-datepicker-popup datepicker-options="dateOptions2"
                     ng-click="openExpiryDate=!openExpiryDate" style="background:none;"
                     ng-model="reagent.data.expiryTime" readonly required
                     is-open="openExpiryDate" />
              <span class=" form-control-feedback" ng-click="openExpiryDate=!openExpiryDate"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
          </div>

          <!--产商电话-->
          <div class="form-group has-feedback" ng-class="{'has-success':preparationPhoneOk = reagent_form.manufacturerPhone.$dirty && reagent_form.manufacturerPhone.$valid&&reagent.data.manufacturerPhone!=='',
                'has-error':preparationPhoneErr = reagent_form.manufacturerPhone.$dirty && reagent_form.manufacturerPhone.$invalid}">
            <label for="manufacturerPhone" class="col-sm-3 control-label">{{'厂商电话'|translate}}：</label>
            <div class="col-sm-8">
              <input type="tel" class="form-control" id="manufacturerPhone" name="manufacturerPhone" maxlength="20"
                     ng-pattern="/^((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)$/"
                     ng-model="reagent.data.manufacturerPhone">
              <span ng-show="preparationPhoneOk" class="glyphicon glyphicon-ok form-control-feedback"></span>
            </div>
          </div>

        </div>
      </fieldset>

    </form>

    <div class="modal-footer">
      <button class="btn btn-primary pull-left" ng-click="reagent.clear();">{{'清空'|translate}}</button>
      <button class="btn btn-default pull-left" ng-click="reagent.submit()" ng-disabled="reagent_form.$invalid">{{'保存'|translate}}</button>
    </div>
  </div>

</div>

